import{i as e,a as t}from"./ipcRenderer-b6d714b6.js";import{g as a,i as l,m as o,u as n,a as i,h as s,s as u,_ as r,r as p,o as h,c as m,w as d,f as c,n as g,d as v,t as f,F as b,j as y,k as x}from"./index-f3c4ea91.js";let S;let w=a({},{title:"",width:"",theme:null,message:"",overlay:!0,callback:null,teleport:"body",className:"",allowHtml:!1,lockScroll:!0,transition:void 0,beforeClose:null,overlayClass:"",overlayStyle:void 0,messageAlign:"",cancelButtonText:"",cancelButtonColor:null,cancelButtonDisabled:!1,confirmButtonText:"",confirmButtonColor:null,confirmButtonDisabled:!1,showConfirmButton:!0,showCancelButton:!1,closeOnPopstate:!0,closeOnClickOverlay:!1});function C(e){return l?new Promise(((t,l)=>{S||function(){const e={setup(){const{state:e,toggle:t}=n();return()=>i(u,s(e,{"onUpdate:show":t}),null)}};({instance:S}=o(e))}(),S.open(a({},w,e,{callback:e=>{("confirm"===e?t:l)(e)}}))})):Promise.resolve(void 0)}const _={class:"box"},A={class:"flex-box"},k={class:"flex-box"},B={style:{color:"red","font-weight":"bold"}},D={class:"flex-box"};const T={id:"app-base-db"},N={class:"header"},O={class:"header-title"},z={style:{display:"flex","align-items":"center"}},q={style:{display:"flex","align-items":"center",margin:"28px 0px"}},I={class:"card-warpper"},U={class:"operation-box"},L={class:"operation-box"},$={style:{padding:"24px"}},E={style:{padding:"24px"}},j={style:{"margin-top":"24px"}};const P=r({components:{itemCard:r({props:{ballNum:{type:Number,default:0},shengxiao:{type:Number,default:0},sum:{type:Number,default:0},color:{type:String,default:""}},methods:{openDialog(e){let t={ballNum:this.ballNum,operation:e};this.$emit("openDialog",t)},openDetail(){this.$emit("openDetail",this.ballNum,this.sum)},getStyle(){let e="#f50";return"blue"===this.color&&(e="#1989fa"),"green"===this.color&&(e="#07c160"),{"background-color":e,color:"white",width:"150px","font-weight":"bold","font-size":"medium"}}}},[["render",function(e,t,a,l,o,n){const s=p("a-button"),u=p("van-tag"),r=p("van-icon"),b=p("van-button"),y=p("a-card");return h(),m("div",_,[i(y,{hoverable:"",style:{width:"200px","border-radius":"15%"}},{default:d((()=>[c("div",null,[i(s,{style:g(n.getStyle()),onClick:n.openDetail},{default:d((()=>[v(f(a.ballNum),1)])),_:1},8,["style","onClick"])]),c("div",A,[i(u,{plain:"",type:"primary",size:"large"},{default:d((()=>[v("生肖")])),_:1}),c("span",null,f(a.shengxiao),1)]),c("div",k,[i(u,{plain:"",type:"primary",size:"large"},{default:d((()=>[v("总计")])),_:1}),c("span",B,f(a.sum)+" / "+f(47*a.sum),1)]),c("div",D,[i(b,{plain:"",size:"small",style:{"font-size":"16px",flex:"1"},type:"success",onClick:t[0]||(t[0]=e=>n.openDialog("add"))},{default:d((()=>[i(r,{name:"plus"})])),_:1}),i(b,{plain:"",size:"small",style:{"margin-left":"12px","font-size":"16px",flex:"1"},type:"danger",onClick:t[1]||(t[1]=e=>n.openDialog("sub"))},{default:d((()=>[i(r,{name:"minus"})])),_:1})])])),_:1})])}],["__scopeId","data-v-c64702ec"]])},data:()=>({all_list:["空"],sum:100,shengxiao:"zhu",ballNum:99,showAddSub:!1,showDetail:!1,showBatch:!1,showType:!1,amount:"",amountText:"1.5.9.35各10",period:"",shengxiaoArr:[],shengxiaoOptions:[{value:"龙"},{value:"兔"},{value:"虎"},{value:"牛"},{value:"鼠"},{value:"猪"},{value:"狗"},{value:"鸡"},{value:"猴"},{value:"羊"},{value:"马"},{value:"蛇"}],typeOptions:[{value:"单"},{value:"双"},{value:"红"},{value:"绿"},{value:"蓝"},{value:"龙"},{value:"兔"},{value:"虎"},{value:"牛"},{value:"鼠"},{value:"猪"},{value:"狗"},{value:"鸡"},{value:"猴"},{value:"羊"},{value:"马"},{value:"蛇"}],allSum:0,allList:[],operationBall:{ballNum:"",amount:"",operation:""},detailList:[],amountStr:"",danSum:0,shuangSum:0,shengxiaoSum:0,redSum:0,blueSum:0,greenSum:0,typeStr:"",addType:"",typeAmount:""}),mounted(){this.init(),this.period=this.$route.query.period},methods:{init(){e.invoke(t.sqlitedbOperation,{action:"getDataDir"}).then((e=>{-1!=e.code?(this.data_dir=e.result,console.log("xxxxxx"),this.queryAllSum()):this.$message.error("请检查sqlite是否正确安装",5)}))},queryAllSum(){const a={action:"queryAllSum",ballDTO:{},period:this.period,ballType:this.ballType,zodiac:this.zodiac};e.invoke(t.ballSqliteOperation,a).then((e=>{this.allList=e.all_list,this.allSum=0;let t=0,a=0,l=0,o=0,n=0,i=0;this.allList.forEach((e=>{this.allSum=parseInt(this.allSum)+parseInt(e.sum),1===e.ballType&&(t=parseInt(t)+parseInt(e.sum)),2===e.ballType&&(a=parseInt(a)+parseInt(e.sum)),this.shengxiaoArr.length>0&&this.shengxiaoArr.forEach((t=>{t===e.zodiac&&(l+=e.sum)})),"blue"===e.color&&(i=parseInt(i)+parseInt(e.sum)),"green"===e.color&&(n=parseInt(n)+parseInt(e.sum)),"red"===e.color&&(o=parseInt(o)+parseInt(e.sum))})),this.danSum=t,this.shuangSum=a,this.shengxiaoSum=l,this.redSum=o,this.blueSum=i,this.greenSum=n}))},shengxiaoChange(){let e=0;this.allList.forEach((t=>{this.shengxiaoArr.length>0&&this.shengxiaoArr.forEach((a=>{a===t.zodiac&&(e+=t.sum)}))})),this.shengxiaoSum=e},typeChange(){let e=this.addType;"红"===e&&(e="red"),"蓝"===e&&(e="blue"),"绿"===e&&(e="green"),"单"===e&&(e=1),"双"===e&&(e=2),this.typeStr=this.allList.filter((t=>t.zodiac===e)).map((e=>e.ballNum)).join(", "),0===this.typeStr.length&&(this.typeStr=this.allList.filter((t=>t.color===e)).map((e=>e.ballNum)).join(", ")),0===this.typeStr.length&&(this.typeStr=this.allList.filter((t=>t.ballType===e)).map((e=>e.ballNum)).join(", "))},openDetail(a,l){const o={action:"queryDetailByNum",ballDTO:{period:this.period,ballNum:a}};e.invoke(t.ballSqliteOperation,o).then((e=>{this.detailList=e.all_list,console.log(this.detailList.length),0===this.detailList.length?this.amountStr="无":(this.amountStrArr=this.detailList.map((e=>e.amount)),this.amountStrArr.forEach((e=>{this.amountStr=e>0?this.amountStr+e+"+":this.amountStr.substring(0,this.amountStr.length-1)+e})),this.amountStr=this.amountStr+" = "+l)})),this.showDetail=!0},openDialog(e){console.log(e),this.operationBall.ballNum=e.ballNum,this.operationBall.operation=e.operation,this.showAddSub=!0,this.$nextTick((()=>{console.log(this.$refs.inputAmountRef),this.$refs.inputAmountRef.focus()}))},openBatch(){this.showBatch=!0},returnInit(){this.$router.push({name:"Login"})},deleteAll(){var l;(l={title:"温馨提示",width:500,message:"是否确认删除本期数据？删除后不可恢复数据"},C(a({showCancelButton:!0},l))).then((()=>{const a={action:"deleteByPeriod",ballDTO:{ballNum:this.operationBall.ballNum,amount:this.operationBall.amount},period:this.period};e.invoke(t.ballSqliteOperation,a).then((e=>{this.queryAllSum()}))})).catch((()=>{}))},openType(){this.showType=!0},zhinengConfirm(){let a=this.amountText.split("各");a[0].split(".").forEach((l=>{const o={action:"operationAmount",ballDTO:{ballNum:l,amount:a[1],period:this.period}};e.invoke(t.ballSqliteOperation,o).then((e=>{this.queryAllSum(),this.amountText=""}))})),this.$message.success("智能批量加数成功！")},amountConfirm(){console.log("amountConfirm"),"sub"===this.operationBall.operation&&(this.operationBall.amount=-this.operationBall.amount);const a={action:"operationAmount",ballDTO:{ballNum:this.operationBall.ballNum,amount:this.operationBall.amount,period:this.period}};e.invoke(t.ballSqliteOperation,a).then((e=>{this.queryAllSum(),this.operationBall.amount="",this.$message.success("操作成功！")}))},typeConfirm(){this.typeStr.split(", ").forEach((a=>{const l={action:"operationAmount",ballDTO:{ballNum:a,amount:this.typeAmount,period:this.period}};e.invoke(t.ballSqliteOperation,l).then((e=>{this.queryAllSum(),this.typeAmount="",this.addType=""}))})),this.$message.success("操作成功！")},shengxiaoSearch(){}}},[["render",function(e,t,a,l,o,n){const s=p("a-statistic"),u=p("a-col"),r=p("a-row"),g=p("a-select"),S=p("van-button"),w=p("itemCard"),C=p("a-input"),_=p("van-dialog"),A=p("a-textarea"),k=p("a-modal");return h(),m("div",T,[c("div",N,[c("div",O,[c("span",null,f(o.period)+"期总数：",1),c("span",null,f(o.allSum),1)]),c("div",null,[i(r,null,{default:d((()=>[i(u,{span:4},{default:d((()=>[i(s,{title:"单数",value:o.danSum,"onUpdate:value":t[0]||(t[0]=e=>o.danSum=e)},{suffix:d((()=>[c("span",null,"/ "+f(47*o.danSum),1)])),_:1},8,["value"])])),_:1}),i(u,{span:4},{default:d((()=>[i(s,{title:"双数",value:o.shuangSum,"onUpdate:value":t[1]||(t[1]=e=>o.shuangSum=e)},{suffix:d((()=>[c("span",null,"/ "+f(47*o.shuangSum),1)])),_:1},8,["value"])])),_:1}),i(u,{span:4},{default:d((()=>[i(s,{title:"红色",value:o.redSum,"onUpdate:value":t[2]||(t[2]=e=>o.redSum=e)},{suffix:d((()=>[c("span",null,"/ "+f(47*o.redSum),1)])),_:1},8,["value"])])),_:1}),i(u,{span:4},{default:d((()=>[i(s,{title:"绿色",value:o.greenSum,"onUpdate:value":t[3]||(t[3]=e=>o.greenSum=e)},{suffix:d((()=>[c("span",null,"/ "+f(47*o.greenSum),1)])),_:1},8,["value"])])),_:1}),i(u,{span:4},{default:d((()=>[i(s,{title:"蓝色",value:o.blueSum,"onUpdate:value":t[4]||(t[4]=e=>o.blueSum=e)},{suffix:d((()=>[c("span",null,"/ "+f(47*o.blueSum),1)])),_:1},8,["value"])])),_:1})])),_:1}),i(r,{style:{"margin-top":"24px"}},{default:d((()=>[i(u,{span:12},{default:d((()=>[c("div",z,[i(g,{class:"header-button",value:o.shengxiaoArr,"onUpdate:value":t[5]||(t[5]=e=>o.shengxiaoArr=e),options:o.shengxiaoOptions,mode:"multiple",size:"large",placeholder:"请选择需要统计的生肖",style:{width:"200px","margin-right":"22px"},onChange:n.shengxiaoChange},null,8,["value","options","onChange"]),i(s,{title:"生肖",value:o.shengxiaoSum,"onUpdate:value":t[6]||(t[6]=e=>o.shengxiaoSum=e)},{suffix:d((()=>[c("span",null,"/ "+f(47*o.shengxiaoSum),1)])),_:1},8,["value"])])])),_:1})])),_:1})]),c("div",q,[i(S,{class:"header-button",type:"primary",onClick:n.returnInit},{default:d((()=>[v("重新选择期数")])),_:1},8,["onClick"]),i(S,{class:"header-button",type:"primary",onClick:n.openBatch},{default:d((()=>[v("智能加数")])),_:1},8,["onClick"]),i(S,{class:"header-button",type:"primary",onClick:n.openType},{default:d((()=>[v("类别加数")])),_:1},8,["onClick"]),i(S,{class:"header-button",type:"danger",onClick:n.deleteAll},{default:d((()=>[v("清空本期数据")])),_:1},8,["onClick"])])]),c("div",I,[(h(!0),m(b,null,y(o.allList,((e,t)=>(h(),x(w,{key:t,ballNum:e.ballNum,sum:e.sum,color:e.color,shengxiao:e.zodiac,onOpenDialog:n.openDialog,onOpenDetail:n.openDetail},null,8,["ballNum","sum","color","shengxiao","onOpenDialog","onOpenDetail"])))),128))]),i(_,{show:o.showAddSub,"onUpdate:show":t[8]||(t[8]=e=>o.showAddSub=e),title:"操作","show-cancel-button":"",onConfirm:n.amountConfirm},{default:d((()=>[c("div",U,[i(C,{autofocus:"true",ref:"inputAmountRef",value:o.operationBall.amount,"onUpdate:value":t[7]||(t[7]=e=>o.operationBall.amount=e),type:"number","addon-before":"金额"},null,8,["value"])])])),_:1},8,["show","onConfirm"]),i(_,{width:"800",show:o.showDetail,"onUpdate:show":t[9]||(t[9]=e=>o.showDetail=e),title:"详情","show-cancel-button":""},{default:d((()=>[c("div",L,[c("span",null,f(o.amountStr),1)])])),_:1},8,["show"]),i(_,{show:o.showBatch,"onUpdate:show":t[11]||(t[11]=e=>o.showBatch=e),title:"智能批量添加","show-cancel-button":"",width:"800",onConfirm:n.zhinengConfirm},{default:d((()=>[c("div",$,[i(A,{value:o.amountText,"onUpdate:value":t[10]||(t[10]=e=>o.amountText=e),placeholder:"例如：10.25.33.11.22各15"},null,8,["value"])])])),_:1},8,["show","onConfirm"]),i(k,{visible:o.showType,"onUpdate:visible":t[14]||(t[14]=e=>o.showType=e),title:"按类别加数",onOk:n.typeConfirm,"ok-text":"确认","cancel-text":"取消"},{default:d((()=>[c("div",E,[i(g,{class:"header-button",value:o.addType,"onUpdate:value":t[12]||(t[12]=e=>o.addType=e),options:o.typeOptions,size:"large",placeholder:"请选择需要添加的类别",style:{width:"200px","margin-right":"22px"},onChange:n.typeChange},null,8,["value","options","onChange"]),c("p",j,f(o.typeStr),1),i(C,{prefix:"￥",value:o.typeAmount,"onUpdate:value":t[13]||(t[13]=e=>o.typeAmount=e),style:{width:"200px"}},null,8,["value"])])])),_:1},8,["visible","onOk"])])}],["__scopeId","data-v-4a672d41"]]);export{P as default};
